<?php
/*   _______________________________________
    |  Obfuscated by PMPR - Php Obfuscator  |
    |             6801061aa223e             |
    |_______________________________________|
*/
 namespace Pmpr\Module\ComponentManager\Model; use Pmpr\Common\Foundation\ORM\Model; use Pmpr\Common\Foundation\ORM\View\View; use Pmpr\Common\Foundation\Interfaces\Constants; use Pmpr\Common\Foundation\Interfaces\IconInterface; use Pmpr\Module\DomainManager\Model\Domain; class Installation extends Model { const gcosauiygyouusee = 7; const sukyayoieioyymka = 'serial'; const qkmqmaeuyokqgemg = 'domain_id'; const wgyqyqawgywsmyko = 'full_name'; const cmiegiycgiucucgs = 'request_id'; const iuyuwaomgikisgww = 'campaign_id'; const ogqcgemayqiaucag = 'component_id'; const owyiuoyiiaiksmug = 'organizational_role'; const qgmyqygwoqgqiaqo = 'domain_name'; const mqacmkcsmigesauo = 'domain_url'; const umguqwcoumessuia = Constants::weayyoewessosyko . Constants::qokmauugqosoyosk; const esuagmgegkwsocmk = 'latest_check_serial'; public function register() { $this->muuwuqssqkaieqge(__('Installations', PR__MDL__COMPONENT_MANAGER))->guiaswksukmgageq(__('Installation', PR__MDL__COMPONENT_MANAGER))->saemoowcasogykak(IconInterface::wsueeasywwmsikqe)->uaywwyimkgwyqwya([Constants::yiuwgggacagyeqmo => 70]); $this->ecmiqywsauuoccwo(Constants::ukwaycqmyyuekwqg)->ecmiqywsauuoccwo(Constants::ieioeisgwcgysukw)->ecmiqywsauuoccwo(Constants::awysmmukegasimmq)->ecmiqywsauuoccwo(Constants::weiosaewqequuyuq); $this->swsaakqseuaacagq(Constants::xgimwmogukqqcuky, [$this, 'ywgqgaomoekeewyg'])->swsaakqseuaacagq(Constants::aesecoisycsqcgmo, [$this, 'gkieuyoqcusoksmg'])->swsaakqseuaacagq(Constants::emsskyeoaqokwsoa, [$this, 'yeuyyckseoiokmmm']); } public function uwmqacgewuauagai() { $eqwoegegiamegqsm = $this->caokeucsksukesyo()->skckwsgymkimyuwo(); $this->cquokmemekqqywgi($eqwoegegiamegqsm->gysoeyaguiyewoes(self::sukyayoieioyymka)->gswweykyogmsyawy(__('Serial', PR__MDL__COMPONENT_MANAGER)))->cquokmemekqqywgi($eqwoegegiamegqsm->mecqycesgysyasiu(Constants::icymuyeowqaciyyu)->gswweykyogmsyawy(__('Expiration', PR__MDL__COMPONENT_MANAGER))->mscsweokoguamsgc(Constants::ieioeisgwcgysukw))->cquokmemekqqywgi($eqwoegegiamegqsm->qoemykoeuecmsmwe(Constants::oguseymmyyoyaako)->qcssowoqeqysosca()->gswweykyogmsyawy(__('Product', PR__MDL__COMPONENT_MANAGER))->eyygsasuqmommkua(0)->iwwmociiuayuwssq(function ($eqgoocgaqwqcimie) { return $this->caokeucsksukesyo()->wmkogisswkckmeua()->ywggokoaagwwqyak([Constants::ckmqoekmugkggeym => $eqgoocgaqwqcimie, Constants::osiogououyayqyck => Constants::iickqyckyaqcaokm, Constants::mgsccwumkcawaqcy => '_blank']); }))->cquokmemekqqywgi($eqwoegegiamegqsm->gysoeyaguiyewoes(self::wgyqyqawgywsmyko)->qcssowoqeqysosca()->gswweykyogmsyawy(__('Full Name', PR__MDL__COMPONENT_MANAGER))->iwwmociiuayuwssq(function ($eqgoocgaqwqcimie, $mksyucucyswaukig) { if ($iogueuywqgygegys = $this->waecsyqmwascmqoa($mksyucucyswaukig, self::owyiuoyiiaiksmug)) { $eqgoocgaqwqcimie .= " ({$iogueuywqgygegys})"; } if ($auoeyussiyykosqg = $this->waecsyqmwascmqoa($mksyucucyswaukig, Constants::memskaacyikisggk)) { $eqgoocgaqwqcimie .= ' - ' . $this->caokeucsksukesyo()->wgqqgewcmcemoewo()->yuawgssgauywkiia($this->caokeucsksukesyo()->gagsyqagguwwauac()->eusockqasqqmoess($auoeyussiyykosqg), "tel:{$auoeyussiyykosqg}"); } return $eqgoocgaqwqcimie; }))->cquokmemekqqywgi($eqwoegegiamegqsm->usqseiuaeauwuwus(Constants::memskaacyikisggk)->gswweykyogmsyawy(__('Phone', PR__MDL__COMPONENT_MANAGER))->qcssowoqeqysosca()->acceqyqygswoecwe(11)->mscsweokoguamsgc(Constants::ieioeisgwcgysukw))->cquokmemekqqywgi($eqwoegegiamegqsm->usqseiuaeauwuwus(self::owyiuoyiiaiksmug)->qcssowoqeqysosca()->gswweykyogmsyawy(__('Organization Role', PR__MDL__COMPONENT_MANAGER))->mscsweokoguamsgc(Constants::ieioeisgwcgysukw))->cquokmemekqqywgi($eqwoegegiamegqsm->qwwuoqeeiyuoyogs(self::esuagmgegkwsocmk)->gswweykyogmsyawy(__('Latest Check Serial', PR__MDL__COMPONENT_MANAGER))->qcssowoqeqysosca()->qcqeqimisiisswky())->cquokmemekqqywgi($eqwoegegiamegqsm->eoaomaokwkwqyqiq(self::cmiegiycgiucucgs)->gswweykyogmsyawy(__('Install Request', PR__MDL__COMPONENT_MANAGER))->geimymogiqyssawi(Request::class, Request::ukmumwwqqeeyescc)->kkeymosoimmgsaug()->iwwmociiuayuwssq(function ($eqgoocgaqwqcimie, $mksyucucyswaukig) { $aqmwamyiwgeeymqa = $this->iekyeyicoyyawomk()->iscemaoqqckmkago(self::cmiegiycgiucucgs, $mksyucucyswaukig); if ($aqmwamyiwgeeymqa) { $eqgoocgaqwqcimie = $this->caokeucsksukesyo()->wmkogisswkckmeua()->ywggokoaagwwqyak([Constants::squoamkioomemiyi => Constants::emkkgysokckswycs, Constants::emkkgysokckswycs => Request::symcgieuakksimmu(), Constants::ckmqoekmugkggeym => $aqmwamyiwgeeymqa]); } else { $eqgoocgaqwqcimie = __('Not submitted yet.', PR__MDL__COMPONENT_MANAGER); } return $eqgoocgaqwqcimie; }))->cquokmemekqqywgi($eqwoegegiamegqsm->eoaomaokwkwqyqiq(self::iuyuwaomgikisgww)->gswweykyogmsyawy(__('Campaign', PR__MDL__COMPONENT_MANAGER))->wuuqgaekqeymecag(Campaign::class))->cquokmemekqqywgi($eqwoegegiamegqsm->eoaomaokwkwqyqiq(self::qkmqmaeuyokqgemg)->gswweykyogmsyawy(__('Domain', PR__MDL__COMPONENT_MANAGER))->wuuqgaekqeymecag(Domain::class))->cquokmemekqqywgi($eqwoegegiamegqsm->eoaomaokwkwqyqiq(self::ogqcgemayqiaucag)->acokiqqgsmoqaeyu()->gswweykyogmsyawy(__('Component', PR__MDL__COMPONENT_MANAGER))->wuuqgaekqeymecag(Component::class))->cquokmemekqqywgi($eqwoegegiamegqsm->qwwuoqeeiyuoyogs(Constants::CREATED_AT)->gswweykyogmsyawy(__('Created At', PR__MDL__COMPONENT_MANAGER))->qcqeqimisiisswky()); parent::uwmqacgewuauagai(); } public function aoqwywcqmoqaukkq() { $qcokqoamkkyoemcy = $this->qyeguewwsmosqcwc(); $uuyucgkyusckoaeq = $this->caokeucsksukesyo()->wmkogisswkckmeua(); $this->yyoqecggyacaseko()->mkksewyosgeumwsa($uuyucgkyusckoaeq->ymuegqgyuagyucws(self::sukyayoieioyymka)->kqqqugemmqagucuq()->eumecwmqmukqgyea())->mkksewyosgeumwsa($uuyucgkyusckoaeq->ymuegqgyuagyucws(Constants::icymuyeowqaciyyu)->iccqusgqmsqaiqow())->mkksewyosgeumwsa($uuyucgkyusckoaeq->mccagaqeagiikkec(self::iuyuwaomgikisgww)->ugquamoakekwyiqg(Campaign::class))->mkksewyosgeumwsa($uuyucgkyusckoaeq->mccagaqeagiikkec(Constants::oguseymmyyoyaako)->ukqywcsoogkyoaoa(Constants::oguseymmyyoyaako))->mkksewyosgeumwsa($uuyucgkyusckoaeq->mccagaqeagiikkec(self::ogqcgemayqiaucag)->ugquamoakekwyiqg(Component::class))->mkksewyosgeumwsa($uuyucgkyusckoaeq->ymuegqgyuagyucws(self::wgyqyqawgywsmyko))->mkksewyosgeumwsa($uuyucgkyusckoaeq->ymuegqgyuagyucws(self::owyiuoyiiaiksmug))->mkksewyosgeumwsa($uuyucgkyusckoaeq->ymuegqgyuagyucws(Constants::memskaacyikisggk)->smigkcmumwkgamkk())->mkksewyosgeumwsa($uuyucgkyusckoaeq->yyuwuqsiucweeoue(self::umguqwcoumessuia)->eumecwmqmukqgyea()->mkmssscwmeekwgqo()->gswweykyogmsyawy(__('Domain Type', PR__MDL__COMPONENT_MANAGER))->eyygsasuqmommkua($qcokqoamkkyoemcy ? Constants::sokiwgiwgagukgsg : Constants::ocayisqocqoekqiq)->kesomeowemmyygey(Constants::ocayisqocqoekqiq, __('New Domain', PR__MDL__COMPONENT_MANAGER))->kesomeowemmyygey(Constants::sokiwgiwgagukgsg, __('Old Domain', PR__MDL__COMPONENT_MANAGER))->qyucewwiggkyeaso(Constants::ocayisqocqoekqiq, [self::qgmyqygwoqgqiaqo, self::mqacmkcsmigesauo])->qyucewwiggkyeaso(Constants::sokiwgiwgagukgsg, self::qkmqmaeuyokqgemg))->mkksewyosgeumwsa($uuyucgkyusckoaeq->ymuegqgyuagyucws(self::qgmyqygwoqgqiaqo)->gswweykyogmsyawy(__('Domain Name', PR__MDL__COMPONENT_MANAGER)))->mkksewyosgeumwsa($uuyucgkyusckoaeq->ymuegqgyuagyucws(self::mqacmkcsmigesauo)->kqqqugemmqagucuq()->gswweykyogmsyawy(__('Domain URL', PR__MDL__COMPONENT_MANAGER)))->mkksewyosgeumwsa($uuyucgkyusckoaeq->mccagaqeagiikkec(self::qkmqmaeuyokqgemg)->ugquamoakekwyiqg(Domain::class)); parent::aoqwywcqmoqaukkq(); } public function ywgqgaomoekeewyg($qqomumygoacsmsie, View $mksyucucyswaukig) { if (Constants::weiosaewqequuyuq === $qqomumygoacsmsie) { $uuyucgkyusckoaeq = $this->caokeucsksukesyo()->wmkogisswkckmeua(); $ikgwqyuyckaewsow = $this->yyoqecggyacaseko()->ugmceccgwaaaigiy(); $qsqwqsymmqeoqwcu = [$uuyucgkyusckoaeq->ymuegqgyuagyucws(Constants::qiyqwyiiwykeccmo)->gswweykyogmsyawy(__('Count', PR__MDL__COMPONENT_MANAGER))->escqqisecooswqgo()->mkmssscwmeekwgqo()]; $aowmesqseaiqimyu = [self::sukyayoieioyymka, self::qkmqmaeuyokqgemg, self::mqacmkcsmigesauo, Constants::memskaacyikisggk, self::umguqwcoumessuia, self::qgmyqygwoqgqiaqo, self::owyiuoyiiaiksmug]; foreach ($ikgwqyuyckaewsow as $aiowsaccomcoikus) { if (!in_array($aiowsaccomcoikus->mwikyscisascoeea(), $aowmesqseaiqimyu, true)) { $qsqwqsymmqeoqwcu[] = $aiowsaccomcoikus; } } $mksyucucyswaukig->rsaiaimkmskoiysk(Constants::imywcsggckkcywgk, 'batch_add', [Constants::qescuiwgsyuikume => __('Batch Creation', PR__MDL__COMPONENT_MANAGER), Constants::ismwycwsasweqomi => [Constants::squoamkioomemiyi => Constants::PRIMARY, Constants::qescuiwgsyuikume => __('Batch Creation of Installation', PR__MDL__COMPONENT_MANAGER), Constants::ssmskyqgcmeiayco => $uuyucgkyusckoaeq->ywoasuyoaicwqqsu($qsqwqsymmqeoqwcu, ['class' => 'pr-fieldset']), Constants::kekekeusyqkouowm => [Constants::mosycwwoqguicaeo, ['class' => 'pr-btn btn-primary installation-batch-creation', Constants::qescuiwgsyuikume => __('Create', PR__MDL__COMPONENT_MANAGER)]]]]); $mksyucucyswaukig->rsaiaimkmskoiysk(Constants::imywcsggckkcywgk, 'generate_serials_pdf', [Constants::qescuiwgsyuikume => __('Serials PDF', PR__MDL__COMPONENT_MANAGER), Constants::ismwycwsasweqomi => [Constants::squoamkioomemiyi => Constants::PRIMARY, Constants::qescuiwgsyuikume => __('Download Installations Serial PDF', PR__MDL__COMPONENT_MANAGER), Constants::ssmskyqgcmeiayco => $uuyucgkyusckoaeq->ywoasuyoaicwqqsu([$uuyucgkyusckoaeq->yyuwuqsiucweeoue(Constants::uwceyikaaaqgkkee)->mkmssscwmeekwgqo()->eumecwmqmukqgyea()->gswweykyogmsyawy(__('Template', PR__MDL__COMPONENT_MANAGER))->kesomeowemmyygey('5x13', $this->caokeucsksukesyo()->gagsyqagguwwauac()->eusockqasqqmoess('5x13'))->kesomeowemmyygey('4x4', $this->caokeucsksukesyo()->gagsyqagguwwauac()->eusockqasqqmoess('4x4')), $uuyucgkyusckoaeq->yyuwuqsiucweeoue(Constants::kyyscqqmsikeuaea)->eumecwmqmukqgyea()->gswweykyogmsyawy(__('Filter', PR__MDL__COMPONENT_MANAGER))->kesomeowemmyygey(self::ogqcgemayqiaucag, sprintf('%s (%s)', __('By Component', PR__MDL__COMPONENT_MANAGER), __('not assigned', PR__MDL__COMPONENT_MANAGER)))->kesomeowemmyygey(self::iuyuwaomgikisgww, sprintf('%s (%s)', __('By Campaign', PR__MDL__COMPONENT_MANAGER), __('not assigned', PR__MDL__COMPONENT_MANAGER)))->kesomeowemmyygey(Constants::cssmmusomaywaswe, __('Range', PR__MDL__COMPONENT_MANAGER))->kesomeowemmyygey(Constants::ALL, sprintf('%s (%s)', __('All', PR__MDL__COMPONENT_MANAGER), __('not assigned', PR__MDL__COMPONENT_MANAGER)))->qyucewwiggkyeaso(Constants::cssmmusomaywaswe, Constants::cssmmusomaywaswe)->qyucewwiggkyeaso(self::iuyuwaomgikisgww, self::iuyuwaomgikisgww)->qyucewwiggkyeaso(self::ogqcgemayqiaucag, self::ogqcgemayqiaucag), $uuyucgkyusckoaeq->ymuegqgyuagyucws(Constants::cssmmusomaywaswe)->mkmssscwmeekwgqo()->gswweykyogmsyawy(__('Range', PR__MDL__COMPONENT_MANAGER))->gucwmccyimoagwcm(sprintf(__('Separate with %s like: %s', PR__MDL__COMPONENT_MANAGER), '-', '10-200')), $uuyucgkyusckoaeq->mccagaqeagiikkec(self::ogqcgemayqiaucag)->mkmssscwmeekwgqo()->gswweykyogmsyawy(__('Component', PR__MDL__COMPONENT_MANAGER))->ugquamoakekwyiqg(Component::class), $uuyucgkyusckoaeq->mccagaqeagiikkec(self::iuyuwaomgikisgww)->mkmssscwmeekwgqo()->gswweykyogmsyawy(__('Campaign', PR__MDL__COMPONENT_MANAGER))->ugquamoakekwyiqg(Campaign::class)], ['class' => 'pr-fieldset']), Constants::kekekeusyqkouowm => [Constants::mosycwwoqguicaeo, ['class' => 'pr-btn btn-primary generate-serials-pdf', Constants::qescuiwgsyuikume => __('Download', PR__MDL__COMPONENT_MANAGER)]]]]); } } public function gkieuyoqcusoksmg($uwomkgseoiegeume, $msqkueqksqwmskak) { $ceiwsaacewygcsqg = $this->kumuygiiqswoyasy(); if (!isset($uwomkgseoiegeume[$ceiwsaacewygcsqg]) || !$uwomkgseoiegeume[$ceiwsaacewygcsqg]) { $wuouqecakiimsmec = trim($uwomkgseoiegeume[self::sukyayoieioyymka] ?? ''); if ($wuouqecakiimsmec && strlen($wuouqecakiimsmec) === self::gcosauiygyouusee) { $eqwoegegiamegqsm = $this->caokeucsksukesyo()->skckwsgymkimyuwo(); $cmaccwokqweqweqi = $this->iekyeyicoyyawomk()->oqomcmyuuakigusk([$eqwoegegiamegqsm->megqywqeuquawkim(self::sukyayoieioyymka, $wuouqecakiimsmec), $eqwoegegiamegqsm->megqywqeuquawkim(self::qkmqmaeuyokqgemg, $icwicymcioeyeyek[self::qkmqmaeuyokqgemg] ?? 0)]); if ($cmaccwokqweqweqi && (!empty($msqkueqksqwmskak) || $this->mwyqswsaeeewsosm($msqkueqksqwmskak) !== $this->mwyqswsaeeewsosm($cmaccwokqweqweqi))) { $this->gssiscqyqsacmeca()->msqsseeaasqysese(__('Entered serial already used for anther installation, please enter another one.', PR__MDL__COMPONENT_MANAGER)); } } else { $this->gssiscqyqsacmeca()->msqsseeaasqysese(__('Entered serial not valid', PR__MDL__COMPONENT_MANAGER)); } } } public function yeuyyckseoiokmmm($icwicymcioeyeyek) { if (isset($uwomkgseoiegeume[self::umguqwcoumessuia]) && Constants::ocayisqocqoekqiq === $uwomkgseoiegeume[self::umguqwcoumessuia]) { $ymqmyyeuycgmigyo = trim($uwomkgseoiegeume[self::qgmyqygwoqgqiaqo] ?? ''); $eeamcawaiqocomwy = trim($uwomkgseoiegeume[self::mqacmkcsmigesauo] ?? ''); if ($ymqmyyeuycgmigyo && $eeamcawaiqocomwy) { $sogksuscggsicmac = Domain::symcgieuakksimmu()->kmuykuaakicwsocs([Constants::NAME => $ymqmyyeuycgmigyo, Constants::ciyoccqkiamemcmm => $this->caokeucsksukesyo()->gyecsegqciqykomu()->mkcmkkskeeaskowy($eeamcawaiqocomwy)]); if (!is_wp_error($sogksuscggsicmac)) { $icwicymcioeyeyek[self::qkmqmaeuyokqgemg] = $sogksuscggsicmac[Constants::gouqcwikiiygyasc] ?? 0; } else { $this->gssiscqyqsacmeca()->msqsseeaasqysese($sogksuscggsicmac); } } else { $this->gssiscqyqsacmeca()->msqsseeaasqysese(__('Domain URL and Domain Name can not be empty.', PR__MDL__COMPONENT_MANAGER)); } } return $icwicymcioeyeyek; } public function uikgwcuascgeissw($mksyucucyswaukig) : ?string { $pkyyagewkiyckmwy = ''; if ($mksyucucyswaukig) { if (is_numeric($mksyucucyswaukig)) { $mksyucucyswaukig = $this->iekyeyicoyyawomk()->akkkoiiymmamsauc($mksyucucyswaukig); } $mokawwccycoiqeka = $this->waecsyqmwascmqoa($mksyucucyswaukig, self::qkmqmaeuyokqgemg); $fkgqmwkusywysaus = $this->waecsyqmwascmqoa($mksyucucyswaukig, self::wgyqyqawgywsmyko); $pkyyagewkiyckmwy = sprintf('%s - %s', $fkgqmwkusywysaus, Domain::symcgieuakksimmu()->uikgwcuascgeissw($mokawwccycoiqeka)); } return $pkyyagewkiyckmwy; } public function camuqekyeyqkmgwo() : string { return $this->caokeucsksukesyo()->owgcciayoweymuws()->gykqksiwukaccoyg(self::gcosauiygyouusee); } }
